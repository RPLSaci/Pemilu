async function e(e){if(1!==e)return;let r=document.querySelector("input[name='osis']:checked");if(!r){alert("Pilihlah 1 kandidat");return}let t=r.value;alert(`Kandidat yang dipilih: ${t}`);try{let e=JSON.parse(localStorage.getItem("Pilihan"));e||(alert("Kamu harus pilih MPK Dahulu"),document.location.href="./mpk.html"),localStorage.setItem("Pilihan",JSON.stringify({MPK:e.MPK,OSIS:t})),document.location.href="./success.html"}catch(e){console.error("An error occurred while voting",e),alert("An error occurred while voting. Please try again.")}}(async function(){let e=JSON.parse(localStorage.getItem("loginObject"));if(console.log(e),!e||!localStorage.getItem("loginObject")){alert("NO USERDATA, REDIRECTING TO LOGIN"),document.location.href="./index.html";return}try{let r=await fetch("https://8080-rplsaci-pemiluapi-jfvwph8s12t.ws-us116.gitpod.io/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})});if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);let t=await r.json();console.log(t),t.error?(console.error("Login failed: ",t.error),alert("Login failed. Please try again.")):((t.SudahMemilih||t.user.WaktuPemilihan)&&(alert("Kamu sudah Memilih"),document.location.href="./sudahMemilih.html"),document.querySelector("#usn").textContent=t.user.username)}catch(e){console.error("An error occurred while logging in",e),alert("An error occurred while logging in. Please try again.")}})(),e(0);
//# sourceMappingURL=osis.c2fb5c82.js.map
