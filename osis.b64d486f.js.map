{"mappings":"ACqDA,eAAe,EAAM,CAAC,EAClB,GAAG,AAAM,IAAN,EAAS,OAEZ,IAAM,EAAmB,SAAS,aAAa,CAAC,8BAEhD,GAAI,CAAC,EAAkB,CACnB,MAAM,uBACN,MACJ,CAEA,IAAM,EAAgB,EAAiB,KAAK,CAC5C,MAAM,CAAC,uBAAuB,EAAE,EAAc,CAAC,EAE/C,GAAI,CACA,IAAI,EAAU,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,YAE1C,IACA,MAAM,+BACN,SAAS,QAAQ,CAAC,IAAI,CAAG,cAG7B,aAAa,OAAO,CAAC,UAAU,KAAK,SAAS,CAAC,CAAC,IAAM,EAAQ,GAAG,CAAC,KAAO,CAAa,IAuBjF,SAAS,QAAQ,CAAC,IAAI,CAAG,gBAEjC,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,iCAAkC,GAChD,MAAM,oDACV,CACJ,CAtGA,AAEA,CAAA,iBAGI,IAAM,EAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,gBAI7C,GAHA,QAAQ,GAAG,CAAC,GAGR,CAAC,GAAQ,CAAC,aAAa,OAAO,CAAC,eAAgB,CAC/C,MAAM,qCACN,SAAS,QAAQ,CAAC,IAAI,CAAG,eACzB,MACJ,CAEA,GAAI,CAEA,IAAM,EAAW,MAAM,MAAM,8EAA2B,CACpD,OAAQ,OACR,QAAS,CACL,eAAgB,kBACpB,EACA,KAAM,KAAK,SAAS,CAAC,CAAE,SAAU,EAAK,QAAQ,CAAE,SAAU,EAAK,QAAQ,AAAC,EAC5E,GAEA,GAAI,CAAC,EAAS,EAAE,CACZ,MAAM,AAAI,MAAM,CAAC,oBAAoB,EAAE,EAAS,MAAM,CAAC,CAAC,EAG5D,IAAM,EAAS,MAAM,EAAS,IAAI,GAClC,QAAQ,GAAG,CAAC,GAER,EAAO,KAAK,EAEZ,QAAQ,KAAK,CAAC,iBAAkB,EAAO,KAAK,EAC5C,MAAM,qCAGH,CAAA,EAAO,YAAY,EAAI,EAAO,IAAI,CAAC,cAAc,AAAd,IAClC,MAAM,sBACN,SAAS,QAAQ,CAAC,IAAI,CAAG,uBAE7B,SAAS,aAAa,CAAC,QAAQ,WAAW,CAAG,EAAO,IAAI,CAAC,QAAQ,CAEzE,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,qCAAsC,GACpD,MAAM,wDACV,CACJ,CAAA,IAGA,EAAM","sources":["<anon>","src/assets/js/osis.js"],"sourcesContent":["// Inisialisasi fungsi\ninit();\nasync function init() {\n    let BASEAPI = \"https://redesigned-lamp-wx969x4q6g6f599x-8080.app.github.dev\";\n    // Ambil data login dari localStorage\n    const data = JSON.parse(localStorage.getItem(\"loginObject\"));\n    console.log(data);\n    // Cek apakah data login tersedia\n    if (!data || !localStorage.getItem(\"loginObject\")) {\n        alert(\"NO USERDATA, REDIRECTING TO LOGIN\");\n        document.location.href = \"./index.html\";\n        return; // Hentikan eksekusi lebih lanjut jika data tidak ada\n    }\n    try {\n        // Lakukan permintaan POST untuk memverifikasi pengguna\n        const response = await fetch(BASEAPI + \"/api/user/login\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                username: data.username,\n                password: data.password\n            })\n        });\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        const result = await response.json();\n        console.log(result);\n        if (result.error) {\n            // Tangani kesalahan jika ada\n            console.error(\"Login failed: \", result.error);\n            alert(\"Login failed. Please try again.\");\n        } else {\n            // Tampilkan nama pengguna jika login berhasil\n            if (result.SudahMemilih || result.user.WaktuPemilihan) {\n                alert(\"Kamu sudah Memilih\");\n                document.location.href = \"./sudahMemilih.html\";\n            }\n            document.querySelector(\"#usn\").textContent = result.user.username;\n        }\n    } catch (error) {\n        console.error(\"An error occurred while logging in\", error);\n        alert(\"An error occurred while logging in. Please try again.\");\n    }\n}\n// Fungsi untuk menangani pemilihan kandidat\nkirim(0);\nasync function kirim(i) {\n    if (i !== 1) return;\n    // Cek apakah ada kandidat yang dipilih\n    const selectedKandidat = document.querySelector(\"input[name='osis']:checked\");\n    if (!selectedKandidat) {\n        alert(\"Pilihlah 1 kandidat\");\n        return; // Hentikan eksekusi lebih lanjut jika tidak ada kandidat yang dipilih\n    }\n    const kandidatValue = selectedKandidat.value;\n    alert(`Kandidat yang dipilih: ${kandidatValue}`);\n    try {\n        let pilihan = JSON.parse(localStorage.getItem(\"Pilihan\"));\n        if (!pilihan) {\n            alert(\"Kamu harus pilih MPK Dahulu\");\n            document.location.href = \"./mpk.html\";\n        }\n        localStorage.setItem(\"Pilihan\", JSON.stringify({\n            \"MPK\": pilihan.MPK,\n            \"OSIS\": kandidatValue\n        }));\n        // Kirim data pemilihan ke server\n        // const response = await fetch(\"https://redesigned-lamp-wx969x4q6g6f599x-8080.app.github.dev/api/vote\", {\n        //     method: \"POST\",\n        //     headers: {\n        //         \"Content-Type\": \"application/json\",\n        //     },\n        //     body: JSON.stringify({ username: data.username, password: data.password, kandidat: kandidatValue }),\n        // });\n        // if (!response.ok) {\n        //     throw new Error(`HTTP error! status: ${response.status}`);\n        // }\n        // const result = await response.json();\n        // if (result.error) {\n        // console.error(\"Voting failed: \", result.error);\n        // alert(\"Voting failed. Please try again.\");\n        // } else {\n        // Tindakan setelah pemilihan berhasil, misalnya mengalihkan halaman\n        // alert(\"Vote submitted successfully!\");\n        document.location.href = \"./success.html\"; // Ganti dengan halaman yang sesuai\n    // }\n    } catch (error) {\n        console.error(\"An error occurred while voting\", error);\n        alert(\"An error occurred while voting. Please try again.\");\n    }\n}\n\n//# sourceMappingURL=osis.b64d486f.js.map\n","// Inisialisasi fungsi\ninit();\n\nasync function init() {\n    let BASEAPI = \"https://redesigned-lamp-wx969x4q6g6f599x-8080.app.github.dev\"\n    // Ambil data login dari localStorage\n    const data = JSON.parse(localStorage.getItem(\"loginObject\"));\n    console.log(data);\n\n    // Cek apakah data login tersedia\n    if (!data || !localStorage.getItem(\"loginObject\")) {\n        alert(\"NO USERDATA, REDIRECTING TO LOGIN\");\n        document.location.href = \"./index.html\";\n        return; // Hentikan eksekusi lebih lanjut jika data tidak ada\n    }\n\n    try {\n        // Lakukan permintaan POST untuk memverifikasi pengguna\n        const response = await fetch(BASEAPI+\"/api/user/login\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({ username: data.username, password: data.password }),\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const result = await response.json();\n        console.log(result)\n\n        if (result.error) {\n            // Tangani kesalahan jika ada\n            console.error(\"Login failed: \", result.error);\n            alert(\"Login failed. Please try again.\");\n        } else {\n            // Tampilkan nama pengguna jika login berhasil\n            if(result.SudahMemilih || result.user.WaktuPemilihan) {\n                alert(\"Kamu sudah Memilih\")\n                document.location.href = \"./sudahMemilih.html\"\n            }\n            document.querySelector(\"#usn\").textContent = result.user.username;\n        }\n    } catch (error) {\n        console.error(\"An error occurred while logging in\", error);\n        alert(\"An error occurred while logging in. Please try again.\");\n    }\n}\n\n// Fungsi untuk menangani pemilihan kandidat\nkirim(0)\nasync function kirim(i) {\n    if(i !== 1) return\n    // Cek apakah ada kandidat yang dipilih\n    const selectedKandidat = document.querySelector(\"input[name='osis']:checked\");\n    \n    if (!selectedKandidat) {\n        alert(\"Pilihlah 1 kandidat\");\n        return; // Hentikan eksekusi lebih lanjut jika tidak ada kandidat yang dipilih\n    }\n\n    const kandidatValue = selectedKandidat.value;\n    alert(`Kandidat yang dipilih: ${kandidatValue}`);\n\n    try {\n        let pilihan = JSON.parse(localStorage.getItem(\"Pilihan\"))\n\n        if(!pilihan) {\n            alert(\"Kamu harus pilih MPK Dahulu\")\n            document.location.href = \"./mpk.html\"\n        }\n\n        localStorage.setItem(\"Pilihan\",JSON.stringify({\"MPK\":pilihan.MPK,\"OSIS\":kandidatValue}))\n\n        // Kirim data pemilihan ke server\n        // const response = await fetch(\"https://redesigned-lamp-wx969x4q6g6f599x-8080.app.github.dev/api/vote\", {\n        //     method: \"POST\",\n        //     headers: {\n        //         \"Content-Type\": \"application/json\",\n        //     },\n        //     body: JSON.stringify({ username: data.username, password: data.password, kandidat: kandidatValue }),\n        // });\n\n        // if (!response.ok) {\n        //     throw new Error(`HTTP error! status: ${response.status}`);\n        // }\n\n        // const result = await response.json();\n\n        // if (result.error) {\n            // console.error(\"Voting failed: \", result.error);\n            // alert(\"Voting failed. Please try again.\");\n        // } else {\n            // Tindakan setelah pemilihan berhasil, misalnya mengalihkan halaman\n            // alert(\"Vote submitted successfully!\");\n            document.location.href = \"./success.html\"; // Ganti dengan halaman yang sesuai\n        // }\n    } catch (error) {\n        console.error(\"An error occurred while voting\", error);\n        alert(\"An error occurred while voting. Please try again.\");\n    }\n}\n"],"names":["kirim","i","selectedKandidat","document","querySelector","alert","kandidatValue","value","pilihan","JSON","parse","localStorage","getItem","location","href","setItem","stringify","MPK","error","console","init","data","log","response","fetch","BASEAPI","method","headers","body","username","password","ok","Error","status","result","json","SudahMemilih","user","WaktuPemilihan","textContent"],"version":3,"file":"osis.b64d486f.js.map"}